(this["webpackJsonpspeed-test-app"]=this["webpackJsonpspeed-test-app"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),s=n(20),i=n.n(s),r=(n(28),n(21)),o=n(5),l=(n(29),n(6)),d=(n(30),n(22)),u=n(1),j=function(){return Object(u.jsxs)("header",{className:"header",children:[Object(u.jsx)("p",{className:"app-title",children:"SpeedTest"}),Object(u.jsx)(d.a,{className:"app-icon"})]})},p=n(7),b=n.n(p),m=n(8),O=n(23),h=n.n(O).a.create(),f=(n(51),function(e){var t=e.height,n=e.width,c=e.size,s=e.containerHeight,i=e.containerWidth,r=Object(a.useRef)(null);Object(a.useEffect)((function(){return o(),function(){cancelAnimationFrame(r.current)}}),[]);var o=function(){for(var e=[],t=5;t<=295;t++)e.push(t);var n=0;!function t(){var a="M"+e.map((function(e){return[e,100+45*Math.sin((e+n)/30)]})).map((function(e){return e[0]+","+e[1]})).join(" L");document.querySelector("#wave-path").setAttribute("d",a),n+=1.5,r.current=requestAnimationFrame(t)}()};return Object(u.jsx)("div",{className:"wave-loader-container",style:{height:s||"150px",width:i||"300px"},children:Object(u.jsx)("svg",{style:{height:t||"150px",width:n||"300px",transform:c?"scale("+c+")":"scale(0.25)"},children:Object(u.jsx)("path",{id:"wave-path"})})})}),x=(n(52),function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),i=Object(o.a)(s,2),r=i[0],l=i[1];Object(a.useEffect)((function(){d()}),[]);var d=function(){var e=Object(m.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,h.get("http://ip-api.com/json");case 4:n=e.sent,c(null===(t=n.data)||void 0===t?void 0:t.isp),l(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),l(!1),c("Unable to detect ISP");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"isp-container",children:r?Object(u.jsx)(f,{}):Object(u.jsx)("p",{className:"isp-name",children:n})})}),v=(n(53),function(e){var t=e.onClick,n=e.buttonText;return Object(u.jsx)("div",{className:"go-button fade-in",onClick:t,children:Object(u.jsx)("p",{className:"button-text",children:n})})}),g=(n(54),n(11)),S="download",N="upload",w=function(e){var t=e.currentTestType,n=e.downloadSpeed,a=e.uploadSpeed;return Object(u.jsx)("div",{className:"stats-container",children:t&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"dowload-speed-wrapper",children:Object(u.jsxs)("div",{className:"download-speed-container",children:[Object(u.jsxs)("div",{className:"stat-header",children:[Object(u.jsx)(g.a,{className:"stat-icon"}),Object(u.jsx)("span",{className:"stat-title",children:"DOWNLOAD"})]}),n?Object(u.jsx)("p",{className:"stat-value",children:n}):Object(u.jsx)(f,{containerHeight:"55px"}),Object(u.jsx)("p",{className:"stat-unit",children:" Mbps"})]})}),Object(u.jsx)("div",{className:"upload-speed-wrapper",style:{flex:t===S?0:1,width:t===S?0:"auto"},children:Object(u.jsxs)("div",{className:"upload-speed-container",style:{transform:t===S?"scale(0)":"scale(1)"},children:[Object(u.jsxs)("div",{className:"stat-header",children:[Object(u.jsx)(g.b,{className:"stat-icon"}),Object(u.jsx)("span",{className:"stat-title",children:"UPLOAD"})]}),a?Object(u.jsx)("p",{className:"stat-value",children:a}):Object(u.jsx)(f,{containerHeight:"55px"}),Object(u.jsx)("p",{className:"stat-unit",children:" Mbps"})]})})]})})},A=(n(55),function(e){var t=e.type,n=e.speed;return Object(u.jsxs)("div",{className:"speed-counter-container ease-in",children:[Object(u.jsx)("span",{className:["speed",t===S?"white":"pink"].join(" "),children:n}),Object(u.jsx)("span",{className:["unit",t===S?"white":"pink"].join(" "),children:"Mbps"})]})});var y=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useState)(!1),c=Object(o.a)(n,2),s=c[0],i=c[1],d=Object(a.useState)(!1),p=Object(o.a)(d,2),b=p[0],m=p[1],O=Object(a.useState)(null),h=Object(o.a)(O,2),f=h[0],g=h[1],y=Object(a.useState)(0),T=Object(o.a)(y,2),E=T[0],k=T[1],F=Object(a.useState)(null),M=Object(o.a)(F,2),C=M[0],I=M[1],z=Object(a.useState)(null),L=Object(o.a)(z,2),B=L[0],P=L[1],R=Object(a.useState)("GO"),D=Object(o.a)(R,2),H=D[0],q=D[1];Object(a.useEffect)((function(){W(),J()}),[s,b,f]);var W=Object(a.useCallback)((function(){if(b){var t=document.getElementById("three-js-container"),n=document.getElementById("canvas-wrapper"),a=n.offsetWidth-10,c=n.offsetHeight-10,i=new l.i({canvas:t,antialias:!0,alpha:!0});i.setSize(a,c);var r=new l.b,o=new l.c(35,a/c,.1,3e3),d=new l.g,u=new l.a(16777215,.5);d.add(u);var j=new l.d(16777215,.5);d.add(j);var p=new l.f({color:f===S?2398942:15023499,size:10}),m=new l.h(230,34,34),O=new l.e(m,p);O.position.set(0,0,-1e3),d.add(O);var h=.0015;i.render(d,o),s?function t(){e.current=requestAnimationFrame(t),O.rotation.y+=.01,O.position.z+=.01;var n=r.getElapsedTime();Math.floor(n)%2===0?(O.scale.x-=h,O.scale.y-=h,O.scale.z-=h):(O.scale.x+=h,O.scale.y+=h,O.scale.z+=h),i.render(d,o)}():cancelAnimationFrame(e.current)}}),[s,b,f]),J=function(){SomApi.account="SOM60def9369dba7",SomApi.domainName="dimaodin.github.io",SomApi.config.sustainTime=4,SomApi.config.testServerEnabled=!0,SomApi.config.userInfoEnabled=!0,SomApi.config.latencyTestEnabled=!1,SomApi.config.uploadTestEnabled=!0,SomApi.config.progress.enabled=!0,SomApi.config.progress.verbose=!0,SomApi.onTestCompleted=U,SomApi.onError=G,SomApi.onProgress=K},U=function(e){console.log("---------------- test result --------------"),console.log(e),m(!1),i(!1),P(e.upload),q("RESTART"),Q()},G=function(e){console.log("-------------- error ----------------------"),console.log(e)},K=function(e){e.type===S||C||I(t.current.currentSpeed||null),g(e.type),k(e.currentSpeed),t.current=Object(r.a)({},e)},Q=function(){document.getElementById("canvas-wrapper").classList.remove(N)};return Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)("div",{className:"speed-test-container",children:[Object(u.jsx)(j,{}),Object(u.jsx)(x,{}),Object(u.jsx)("div",{className:"canvas-container",children:Object(u.jsxs)("div",{id:"canvas-wrapper",className:f||"",children:[b?Object(u.jsx)("canvas",{id:"three-js-container",className:"fade-in"}):Object(u.jsx)(v,{buttonText:H,onClick:function(){g(null),I(null),P(null),m(!0),i(!0),SomApi.startTest()}}),b?Object(u.jsx)(A,{type:f,speed:Math.round(E)}):null]})}),Object(u.jsx)(w,{currentTestType:f,downloadSpeed:C,uploadSpeed:B})]})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(y,{})}),document.getElementById("root")),T()}},[[56,1,2]]]);
//# sourceMappingURL=main.bf1b0e41.chunk.js.map